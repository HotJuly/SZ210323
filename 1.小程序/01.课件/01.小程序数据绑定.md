# 小程序数据绑定

1. C(创建数据)
   1. Vue
      1. 在组件配置对象中,具有data工厂函数,可以返回出data对象
      2. 面试题:为什么data必须是一个函数
         1. 如果data是一个对象,那么通过当前组件构造函数创建的多个组件实例,会共享这一个data对象,导致多组件没有各自的独立状态
   2. React
      1. 在class组件中,class结构中具有state属性,属性值为一个对象
   3. 小程序
      1. 在组件配置对象中,具有data对象
      2. 注意:**小程序会将data对象进行JSON化,实现对象深克隆,所以不需要像Vue一样**
      3. 小程序的data属性可以后续直接通过setData新增,没有任何区别
   
2. R(读取数据)
   1. 在模版中渲染
      1. Vue
         1. 在template中使用插值语法,将data中的属性名写入内部即可使用
         2. 注意:在template中,想要把data中的数据作为文本内容显示出来,才需要使用插值语法
      2. React
         1. 在render函数的return中.使用{},大括号中书写this.state.msg即可
      3. 小程序
         1. 与Vue相同
         2. 注意:**只要想在wxml中使用data中的数据,一定要加插值语法**
   2. 在js代码中读取数据
      1. Vue
         1. 通过this.msg可以读取到数值
         2. 流程:this.msg->数据代理get->this.$data.msg->数据劫持get->返回通过闭包保存的msg数据
      2. React
         1. 通过this.state.msg可以读取到数值
      3. 小程序
         1. 通过this.data.msg可以读取到数值
         2. 说明:**小程序没有数据代理和数据劫持**
   
3. U(修改数据)
   1. Vue
      1. 通过this.msg="我是修改之后的数据"
      2. 流程:this.msg="我是修改之后的数据" => 数据代理set => this.$data.msg="我是修改之后的数据" => 数据劫持set => 通过dep调用notify方法,通知所有的watcher实例进行视图更新
      3. 面试题1:Vue更新data数据是同步还是异步?
         1. 同步修改data中的数据
      4. 面试题2:Vue更新data数据,重新渲染视图是同步还是异步?
         1. Vue更新视图永远是异步更新
   2. React(持久化状态框架)
      1. 通过this.setState\({msg:"我是修改之后的数据"})
      2. 面试题一:setState的执行是同步执行还是异步执行?
         1. 同步执行
      3. 面试题二:setState更新数据的效果是同步的还是异步的?
         1. 即使同步又是异步
         2. React更新机制较为特殊:
            1. 同步
               1. 原生事件
               2. 定时器
            2. 异步
               1. 合成事件(如果事件名称是驼峰命名法,那就是合成事件)
                  1. 注意:合成事件使用到了事件委托,它将事件绑定在#root元素身上
               2. 生命周期
   3. 小程序
      1. 通过this.setData({msg:"我是修改之后的数据"})
      2. 注意:
         1. 小程序中,**setData会同步修改data数据,但是会异步更新视图**
         2. 说明**:setData执行结束,得到的数据一定是最新的**
   
4. 总结:**无论是Vue,React,小程序,都有一个共同特点,就是会将更新视图操作进行类似防抖效果**

5. 数据流向

   1. Vue

      1. 单向(或者可以成为伪双向,上课提到的双向,是指双向数据绑定,不是双向数据流)

      2. 主要:双向数据绑定特指v-model指令,看起来似乎是input内容发生变化,data中的数据立马发生变化,但是及原理还是经过了事件监听

      3. v-model原理:

         1. 将data中的数据作为input框的默认值显示

            1. ```vue
               <input type="text" :value="msg"/>
               ```

         2. 当input内容发生变化的时候,要将data中的对应属性值进行修改

            1. ```vue
               <input type="text" @input="(event)=>{this.msg=event.target.value}"/>
               ```

   2. React

      1. 单向

   3. 小程序

      1. 单向

